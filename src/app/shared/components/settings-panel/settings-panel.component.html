<div class="settings-panel">
  <div class="settings-content">
    <div class="user-info">
      <i class="ti ti-user user-icon"></i>
      <span class="username">{{ username }}</span>
    </div>

    <div class="settings-group">
      <label class="settings-label">
        <span class="label-text">Auto-refresh interval</span>
        <select
          class="refresh-select"
          [value]="refreshInterval"
          (change)="onRefreshIntervalChange($event)"
        >
          <option value="1">1 minutes</option>
          <option value="5">5 minutes</option>
          <option value="30">30 minutes</option>
          <option value="60">1 hour</option>
          <option value="120">2 hours</option>
          <option value="240">4 hours</option>
        </select>
      </label>
    </div>

    <!-- Windows-only Taskbar Settings -->
    <div class="settings-group" *ngIf="isWindows">
      <div class="settings-label">
        <span class="label-text">System Settings</span>
        <div class="button-description">
          Manage tray icon visibility in Windows taskbar settings
        </div>
      </div>
      <button class="system-btn" (click)="openTaskbarSettings()">
        <i class="ti ti-settings"></i>
        Open Taskbar Settings
      </button>
    </div>

    <!-- Update Settings -->
    <div class="settings-group" *ngIf="updateService.isTauri">
      <div class="settings-label">
        <span class="label-text">Application Updates</span>
        <div class="button-description">
          Current version: {{ currentVersion }}
          <span class="update-status" *ngIf="updateAvailable" style="color: #22c55e; margin-left: 8px;">
            Update available!
          </span>
        </div>
      </div>
      <div class="update-controls">
        <button 
          class="system-btn" 
          (click)="checkForUpdates()"
          [disabled]="isCheckingForUpdates"
          style="margin-right: 8px;"
        >
          <i class="ti ti-refresh" [class.spinning]="isCheckingForUpdates"></i>
          {{ isCheckingForUpdates ? 'Checking...' : 'Check for Updates' }}
        </button>
        <button 
          class="system-btn update-btn" 
          (click)="installUpdate()"
          [disabled]="!updateAvailable || isInstallingUpdate"
          *ngIf="updateAvailable"
          style="background-color: #22c55e; color: white;"
        >
          <i class="ti ti-download" [class.spinning]="isInstallingUpdate"></i>
          {{ isInstallingUpdate ? 'Installing...' : 'Install Update' }}
        </button>
      </div>
      <div class="button-description" style="margin-top: 8px; font-size: 12px; color: #64748b;">
        Updates are checked automatically every hour and installed silently
      </div>
    </div>

    <!-- API Rate Limits -->
    <div class="settings-group">
      <app-rate-limit-status></app-rate-limit-status>
    </div>

    <div class="settings-actions">
      <button class="danger-btn" (click)="onLogout()">
        <i class="ti ti-logout"></i> Sign Out
      </button>
    </div>
  </div>
</div>
