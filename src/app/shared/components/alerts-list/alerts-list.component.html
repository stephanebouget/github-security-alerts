<!-- Error Message -->
<div class="error-banner" *ngIf="error">
  {{ error }}
</div>

<div class="alerts-list">
  <!-- Loading spinner -->
  <div class="loading-spinner" *ngIf="alertsLoading">
    <i class="ti ti-refresh spinning"></i> Loading alerts...
  </div>

  <!-- No repos selected -->
  <div class="empty-state" *ngIf="!alertsLoading && (!alerts || alerts.repos.length === 0)">
    <i class="ti ti-package empty-icon"></i>
    <p>No repositories selected</p>
    <button class="primary-btn" (click)="onShowRepos()">
      Select Repositories
    </button>
  </div>

  <!-- Summary -->
  <div
    class="summary"
    *ngIf="alerts && alerts.repos.length > 0"
    [class.safe]="alerts.total_alerts === 0"
    [class.danger]="alerts.total_alerts > 0"
  >
    <i [class]="'summary-icon ' + getAlertIcon()"></i>
    <span class="summary-text" *ngIf="alerts.total_alerts === 0"
      >All repositories are secure</span
    >
    <span class="summary-text" *ngIf="alerts.total_alerts > 0"
      >{{ alerts.total_alerts }} security alert(s) found</span
    >
  </div>

  <!-- Repository List -->
  <div class="repo-list" *ngIf="alerts && alerts.repos.length > 0">
    <div
      class="repo-item"
      *ngFor="let repo of alerts.repos"
      [class.has-alerts]="repo.alerts > 0"
    >
      <div class="repo-info">
        <i class="ti ti-package repo-icon"></i>
        <span class="repo-name">{{ repo.name.split("/")[1] }}</span>
        <span class="repo-org">{{ repo.name.split("/")[0] }}</span>
      </div>
      <div
        class="repo-badge"
        [class.safe]="repo.alerts === 0"
        [class.danger]="repo.alerts > 0"
      >
        <i *ngIf="repo.alerts === 0" class="ti ti-check"></i>
        <span *ngIf="repo.alerts > 0">{{ repo.alerts }}</span>
      </div>
    </div>
  </div>
</div>
