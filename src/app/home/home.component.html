<div class="alerts-container">
  <h1>GitHub Security Alerts Monitor</h1>

  <div class="actions-section">
    <button (click)="fetchAlerts()" [disabled]="loading" class="btn-refresh">
      <i *ngIf="loading" class="ti ti-loader spinning"></i>
      <span *ngIf="!loading"><i class="ti ti-refresh"></i> Refresh</span>
    </button>
  </div>

  <div *ngIf="error" class="error-message"><i class="ti ti-x"></i> {{ error }}</div>

  <div *ngIf="alerts" class="alerts-section">
    <div class="summary">
      <i [class]="'icon ' + getAlertIcon()"></i>
      <h2>Total Alerts: {{ alerts.total_alerts }}</h2>
    </div>

    <div class="repos-list">
      <div *ngFor="let repo of alerts.repos" class="repo-item">
        <span class="repo-name">{{ repo.name }}</span>
        <span class="alert-badge" [ngClass]="{ 'has-alerts': repo.alerts > 0 }">
          <i *ngIf="repo.alerts === 0" class="ti ti-check"></i>
          <span *ngIf="repo.alerts === 0">Safe</span>
          <span *ngIf="repo.alerts > 0">{{ repo.alerts }} alert(s)</span>
        </span>
      </div>
    </div>
  </div>

  <div *ngIf="!alerts && !loading && !error" class="empty-state">
    <p>No alerts data yet. Click refresh to fetch alerts.</p>
  </div>
</div>
