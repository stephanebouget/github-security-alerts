<div class="app-container">
  <!-- Header -->
  <app-header
    [authenticated]="authenticated"
    [alertsLoading]="alertsLoading"
    [currentView]="currentView"
    (refresh)="fetchAlerts()"
    (viewChange)="onViewChange($event)"
  ></app-header>

  <!-- Not Authenticated -->
  <app-login-panel
    *ngIf="!authenticated"
    [authLoading]="authLoading"
    [oauthLoading]="oauthLoading"
    [error]="error"
    [existingToken]="existingToken"
    (login)="onLogin($event)"
    (openTokenPage)="openCreateTokenPage()"
    (startOAuth)="onStartOAuth()"
  ></app-login-panel>

  <!-- Settings View -->
  <app-settings-panel
    *ngIf="authenticated && currentView === 'settings'"
    [username]="username"
    [refreshInterval]="refreshIntervalMinutes"
    (logout)="logout()"
    (refreshIntervalChange)="onRefreshIntervalChange($event)"
  ></app-settings-panel>

  <!-- Repos Selection View -->
  <app-repos-panel
    *ngIf="authenticated && currentView === 'repos'"
    [owners]="owners"
    [ownersLoading]="ownersLoading"
    [searchQuery]="searchQuery"
    (searchQueryChange)="searchQuery = $event"
    (toggleOwner)="toggleOwner($event)"
    (toggleRepo)="toggleRepo($event)"
    (selectAllForOwner)="selectAllForOwner($event)"
    (selectNoneForOwner)="selectNoneForOwner($event)"
    (done)="showAlerts()"
  ></app-repos-panel>

  <!-- Alerts List View -->
  <app-alerts-list
    *ngIf="authenticated && currentView === 'alerts'"
    [alerts]="alerts"
    [alertsLoading]="alertsLoading"
    [error]="error"
    (showRepos)="showRepos()"
  ></app-alerts-list>

  <!-- Footer -->
  <app-footer [alerts]="alerts" [authenticated]="authenticated"></app-footer>
</div>
